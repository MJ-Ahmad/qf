<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Quraner Fariwala — Cart</title>

  <style>
    /* ===== Theme variables ===== */
    :root{
      --primary: #0ea5a4;
      --accent: #06b6d4;
      --success: #10b981;
      --fg-dark: #e6eef6;
      --muted-dark: #94a3b8;
      --bg-dark-0: #071028;
      --bg-dark-1: #071a2a;
      --border-dark: rgba(255,255,255,0.06);

      --fg-light: #0b1220;
      --muted-light: #6b7280;
      --bg-light-0: #fafafa;
      --bg-light-1: #f0f0f0;
      --border-light: #e6e6e6;

      --max-width: 1100px;
      --radius: 12px;
      --shadow-strong: 0 18px 48px rgba(2,6,23,0.12);
      --shadow-soft: 0 8px 24px rgba(2,6,23,0.06);
      font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
    }

    /* ===== Reset & base ===== */
    * { box-sizing: border-box; }
    html,body { height:100%; margin:0; -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale; }
    .container { max-width:var(--max-width); margin:0 auto; padding:1.25rem; }

    /* ===== Theme: dark (default) ===== */
    body.theme-dark {
      background: linear-gradient(180deg, var(--bg-dark-0) 0%, var(--bg-dark-1) 100%);
      color: var(--fg-dark);
    }
    body.theme-dark a { color: var(--primary); }
    body.theme-dark .muted { color: var(--muted-dark); }
    body.theme-dark .border { border-color: var(--border-dark); }

    /* ===== Theme: light ===== */
    body.theme-light {
      background: linear-gradient(180deg, var(--bg-light-0) 0%, var(--bg-light-1) 100%);
      color: var(--fg-light);
    }
    body.theme-light a { color: var(--primary); }
    body.theme-light .muted { color: var(--muted-light); }
    body.theme-light .border { border-color: var(--border-light); }

    /* ===== Header ===== */
    header {
      position: sticky; top:0; z-index:60;
      backdrop-filter: blur(6px);
      background: linear-gradient(180deg, #000000, #1a1a1a);
      border-bottom: 1px solid rgba(255,255,255,0.06);
    }
    .nav-inner { display:flex; align-items:center; justify-content:space-between; gap:1rem; max-width:var(--max-width); margin:0 auto; padding:0.9rem 1rem; }
    .brand { display:flex; align-items:center; gap:0.75rem; text-decoration:none; color:inherit; }
    .site-logo { width:44px; height:44px; border-radius:10px; object-fit:cover; }
    .nav-links { display:flex; gap:0.6rem; align-items:center; }
    .nav-links a { color:inherit; text-decoration:none; padding:0.35rem 0.6rem; border-radius:8px; font-weight:600; }
    .actions .btn { display:inline-flex; align-items:center; gap:0.5rem; padding:0.55rem 0.9rem; border-radius:8px; border:0; cursor:pointer; background: linear-gradient(90deg,var(--primary),var(--accent)); color:#042; font-weight:700; text-decoration:none; }

    /* ===== Hero (small) ===== */
    .hero { padding:2.25rem 1rem; text-align:center; border-bottom:1px solid rgba(255,255,255,0.04); }
    .kicker { display:inline-block; padding:0.36rem 0.8rem; border-radius:999px; background: rgba(6,182,212,0.06); color:var(--accent); font-weight:700; margin-bottom:0.6rem; }
    h1 { margin:0 0 0.6rem 0; font-size:1.6rem; line-height:1.05; }
    p.lead { max-width:760px; margin:0 auto; color:inherit; opacity:0.9; }

    /* ===== Cart layout ===== */
    .cart-wrap { display:flex; gap:1.25rem; align-items:flex-start; margin-top:1rem; flex-wrap:wrap; }
    .cart-list { flex:1 1 560px; min-width:280px; background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01)); border:1px solid var(--border-dark); border-radius:10px; padding:1rem; box-shadow:var(--shadow-soft); }
    .cart-summary { width:320px; min-width:260px; background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01)); border:1px solid var(--border-dark); border-radius:10px; padding:1rem; box-shadow:var(--shadow-soft); }

    .cart-item { display:flex; justify-content:space-between; align-items:center; padding:0.6rem 0; border-bottom:1px dashed rgba(255,255,255,0.03); }
    .cart-item:last-child { border-bottom:0; }
    .cart-item .meta { max-width:70%; }
    .cart-item .meta .title { font-weight:700; margin-bottom:4px; }
    .cart-item .meta .sub { font-size:0.9rem; color:var(--muted-dark); }
    body.theme-light .cart-item .meta .sub { color:var(--muted-light); }

    .cart-empty { padding:1rem 0; color:var(--muted-dark); }
    body.theme-light .cart-empty { color:var(--muted-light); }

    .cart-footer { display:flex; justify-content:space-between; align-items:center; gap:0.5rem; margin-top:1rem; }
    .small { font-size:0.9rem; color:var(--muted-dark); }
    body.theme-light .small { color:var(--muted-light); }

    .full-btn { width:100%; display:inline-flex; align-items:center; justify-content:center; gap:0.6rem; padding:0.6rem; border-radius:10px; background:var(--primary); color:#042; border:none; cursor:pointer; font-weight:700; text-decoration:none; }

    input[type="number"] { width:100%; padding:0.6rem; border-radius:8px; border:1px solid rgba(255,255,255,0.06); background:transparent; color:inherit; }

    /* ===== FAB & modal (kept for compatibility) ===== */
    .cart-fab { position:fixed; right:1rem; bottom:1rem; background: linear-gradient(90deg,var(--primary),var(--accent)); color:#042; padding:0.6rem 0.9rem; border-radius:999px; display:flex; align-items:center; gap:0.6rem; box-shadow: 0 10px 30px rgba(2,6,23,0.6); cursor:pointer; z-index:120; }
    .cart-count { background:var(--success); color:#042; padding:0.15rem 0.45rem; border-radius:999px; font-weight:800; font-size:0.85rem; }

    /* ===== Toast ===== */
    #qf-toast { position:fixed; top:1rem; right:1rem; z-index:200; display:flex; flex-direction:column; gap:0.5rem; pointer-events:none; }
    #qf-toast > div { pointer-events:auto; }

    /* ===== Issues section (above footer) ===== */
    .issues-section { border-top:1px solid rgba(255,255,255,0.04); border-bottom:1px solid rgba(255,255,255,0.04); padding:1.25rem; text-align:center; margin-top:1.5rem; }
    body.theme-light .issues-section { background:#fff; border-color:var(--border-light); }

    /* ===== Footer ===== */
    footer.site-footer { padding:1rem 0; text-align:center; margin-top:1.25rem; background: linear-gradient(180deg, #1a1a1a, #000); color:var(--fg-dark); }
    footer.site-footer a { color:var(--primary); text-decoration:none; font-weight:600; }

    /* ===== Responsive ===== */
    @media (max-width: 1024px) {
      .cart-wrap { flex-direction:column-reverse; }
      .cart-summary { width:100%; }
    }
    @media (max-width: 640px) {
      .nav-links { display:none; }
      .actions { display:none; }
      .hero { padding:1.25rem 1rem; }
    }
  </style>
</head>

<body class="theme-dark font-sans antialiased">
  <!-- Header -->
  <header>
    <div class="nav-inner">
      <a class="brand" href="/" aria-label="Quraner Fariwala home">
        <img src="assets/logo.png" alt="Quraner Fariwala logo" class="site-logo" width="44" height="44" />
        <div style="font-weight:800;line-height:1;color:var(--fg-dark)">Quraner Fariwala</div>
      </a>

      <nav class="nav-links" aria-label="Primary navigation">
        <a href="/qf">Home</a>
        <a href="/qf/donate/">Donate</a>
        <a href="/qfd/contact">Contact</a>
      </nav>

      <div class="actions">
        <a class="btn" href="/qf/donate/" role="button">Donate</a>
      </div>
    </div>
  </header>

  <!-- Hero -->
  <section class="hero" role="banner" aria-label="Cart hero">
    <div class="content">
      <div class="kicker" aria-hidden="true">Your Cart</div>
      <h1 id="hero-heading">Review items in your cart</h1>
      <p class="lead">Items you add from the donation page will appear here. You can remove items, clear the cart, or simulate checkout.</p>
    </div>
  </section>

  <!-- Main -->
  <main class="container" role="main">
    <div class="cart-wrap" aria-live="polite">
      <!-- Cart list -->
      <section class="cart-list" aria-label="Cart items">
        <h3 style="margin:0 0 0.75rem 0">Items</h3>
        <div id="cart-items" class="cart-items" style="min-height:120px">
          <!-- Rendered by JS -->
        </div>
      </section>

      <!-- Summary -->
      <aside class="cart-summary" aria-label="Cart summary">
        <h3 style="margin:0 0 0.75rem 0">Summary</h3>

        <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:0.5rem">
          <div class="small">Subtotal</div>
          <div id="cart-total" style="font-weight:800;font-size:1.05rem">$0.00</div>
        </div>

        <div style="margin-top:0.75rem;display:flex;flex-direction:column;gap:0.6rem">
          <button id="checkout" class="full-btn" aria-label="Checkout">Checkout</button>
          <button id="cart-clear" class="full-btn" style="background:transparent;border:1px solid rgba(255,255,255,0.06);color:inherit">Clear Cart</button>
        </div>

        <div style="margin-top:1rem;font-size:0.92rem;color:var(--muted-dark)">
          <strong>Note:</strong> This demo simulates checkout and clears the cart after confirmation.
        </div>
      </aside>
    </div>

    <!-- Issues / contact section (above footer) -->
    <section class="issues-section" aria-label="Contact for issues">
      <p style="max-width:820px;margin:0 auto;font-size:0.95rem;line-height:1.5;color:inherit">
        If you encounter any issues or have complaints regarding payments, or notice discrepancies in field activities, please contact:
        <a href="mailto:mjahmad2024@outlook.com" style="color:var(--primary);font-weight:600;text-decoration:none;margin-left:0.35rem">mjahmad2024@outlook.com</a>
      </p>
    </section>
  </main>

  <!-- Toast container -->
  <div id="qf-toast" aria-hidden="true"></div>

  <!-- Footer -->
  <footer class="site-footer" role="contentinfo">
    <div style="max-width:var(--max-width);margin:0 auto;padding:0 1rem;display:flex;flex-direction:column;gap:0.5rem;align-items:center;">
      <div style="font-size:0.98rem;color:var(--fg-dark);font-weight:700;">
        © <span id="site-year"></span> QuranerFariwala — All rights reserved.
      </div>

      <div style="font-size:0.95rem;color:var(--muted-dark);">
        This project is open source and available under the
        <a href="https://opensource.org/licenses/MIT" style="color:var(--primary);text-decoration:none;font-weight:600;margin-left:0.25rem">MIT License</a>.
      </div>

      <div style="margin-top:0.25rem;font-size:0.95rem;color:var(--fg-dark);font-weight:600">
        With a vision for tomorrow’s leaders — by
        <a href="mailto:mjahmad2024@outlook.com" style="color:var(--accent);text-decoration:none;margin-left:0.25rem">MJ‑AHMAD</a>
      </div>
    </div>
  </footer>

  <!-- Floating cart FAB (optional, kept for compatibility with donate page) -->
  <div id="cart-fab" class="cart-fab" role="button" aria-label="Open cart" tabindex="0" style="display:none;">
    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#042" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><circle cx="8" cy="21" r="1" fill="#042"></circle><circle cx="19" cy="21" r="1" fill="#042"></circle><path d="M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78" stroke="#042"></path></svg>
    <div style="font-weight:800;color:#042">Cart</div>
    <div id="cart-count" class="cart-count" aria-hidden="true">0</div>
  </div>

  <!-- Year auto-update and optional theme toggle helper -->
  <script>
    document.getElementById('site-year').textContent = new Date().getFullYear();
    // Optional: expose a function to toggle theme from console or other pages
    function toggleTheme() {
      const body = document.body;
      if (body.classList.contains('theme-dark')) {
        body.classList.remove('theme-dark');
        body.classList.add('theme-light');
      } else {
        body.classList.remove('theme-light');
        body.classList.add('theme-dark');
      }
    }
  </script>

  <!-- Inline script: mobile menu + cart logic (your original script preserved) -->
  <script>
    (function () {
      'use strict';

      /* ---------- Helpers ---------- */
      const $ = (sel, root = document) => root.querySelector(sel);
      const $$ = (sel, root = document) => Array.from(root.querySelectorAll(sel));
      const CART_KEY = 'qf_cart_v1';

      function parsePrice(v) {
        const n = Number(String(v).replace(/[^0-9.]/g, ''));
        return Number.isFinite(n) ? n : 0;
      }
      function formatCurrency(n) {
        return '$' + Number(n).toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 });
      }

      /* ---------- Toast ---------- */
      function showToast(msg, ms = 2000) {
        const container = document.getElementById('qf-toast');
        const el = document.createElement('div');
        el.textContent = msg;
        el.style.background = 'rgba(255,255,255,0.06)';
        el.style.color = getComputedStyle(document.body).classList.contains('theme-light') ? '#0b1220' : 'var(--fg-dark)';
        el.style.padding = '0.6rem 0.9rem';
        el.style.borderRadius = '8px';
        el.style.boxShadow = '0 8px 24px rgba(2,6,23,0.6)';
        el.style.opacity = '0';
        el.style.transform = 'translateY(-6px)';
        el.style.transition = 'opacity 180ms ease, transform 180ms ease';
        container.appendChild(el);
        requestAnimationFrame(() => { el.style.opacity = '1'; el.style.transform = 'translateY(0)'; });
        setTimeout(() => {
          el.style.opacity = '0'; el.style.transform = 'translateY(-6px)';
          setTimeout(() => el.remove(), 220);
        }, ms);
      }

      /* ---------- Cart storage ---------- */
      function loadCart() {
        try {
          const raw = localStorage.getItem(CART_KEY);
          return raw ? JSON.parse(raw) : [];
        } catch (e) {
          return [];
        }
      }
      function saveCart(cart) {
        try { localStorage.setItem(CART_KEY, JSON.stringify(cart)); } catch (e) {}
      }

      /* ---------- Cart UI ---------- */
      const cartFab = document.getElementById('cart-fab');
      const cartCountEl = document.getElementById('cart-count');
      const cartModal = document.getElementById('cart-modal');
      const cartItemsEl = document.getElementById('cart-items');
      const cartTotalEl = document.getElementById('cart-total');
      const cartClearBtn = document.getElementById('cart-clear');
      const checkoutBtn = document.getElementById('checkout');

      function renderCart() {
        const cart = loadCart();
        cartItemsEl.innerHTML = '';
        if (!cart.length) {
          cartItemsEl.innerHTML = '<div class="cart-empty small" style="padding:0.6rem 0">Your cart is empty.</div>';
        } else {
          cart.forEach((it, idx) => {
            const row = document.createElement('div');
            row.className = 'cart-item';
            const meta = document.createElement('div');
            meta.className = 'meta';
            meta.innerHTML = '<div class="title">' + escapeHtml(it.title) + '</div><div class="sub small">' + (it.custom ? 'Custom donation' : '') + '</div>';
            const right = document.createElement('div');
            right.style.textAlign = 'right';
            right.innerHTML = '<div style="font-weight:800">' + formatCurrency(it.price) + '</div><div style="margin-top:6px"><button data-idx="' + idx + '" class="small remove-item" style="background:transparent;border:0;color:var(--muted-dark);cursor:pointer">Remove</button></div>';
            row.appendChild(meta);
            row.appendChild(right);
            cartItemsEl.appendChild(row);
          });
        }
        const total = cart.reduce((s, i) => s + Number(i.price || 0), 0);
        cartTotalEl.textContent = formatCurrency(total);
        cartCountEl.textContent = String(cart.length);
      }

      function escapeHtml(s){ return String(s).replace(/[&<>"']/g, function(m){ return {'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[m]; }); }

      if (cartFab) {
        cartFab.addEventListener('click', () => {
          if (cartModal) cartModal.classList.toggle('open');
        });
      }

      if (cartClearBtn) {
        cartClearBtn.addEventListener('click', () => {
          if (!confirm('Clear all items from cart?')) return;
          saveCart([]);
          renderCart();
          showToast('Cart cleared');
        });
      }

      if (cartItemsEl) {
        cartItemsEl.addEventListener('click', (e) => {
          const btn = e.target.closest('button.remove-item');
          if (!btn) return;
          const idx = Number(btn.getAttribute('data-idx'));
          const cart = loadCart();
          if (idx >= 0 && idx < cart.length) {
            cart.splice(idx, 1);
            saveCart(cart);
            renderCart();
            showToast('Item removed');
          }
        });
      }

      if (checkoutBtn) {
        checkoutBtn.addEventListener('click', () => {
          const cart = loadCart();
          if (!cart.length) { showToast('Your cart is empty'); return; }
          // For demo: just show a toast and clear cart
          showToast('Thank you — checkout simulated');
          saveCart([]);
          renderCart();
        });
      }

      /* ---------- Add to cart bindings ---------- */
      function bindAddButtons() {
        const addBtns = Array.from(document.querySelectorAll('.add-to-cart'));
        addBtns.forEach(btn => {
          if (btn.dataset.bound === 'true') return;
          btn.dataset.bound = 'true';
          btn.addEventListener('click', (e) => {
            e.preventDefault();
            const title = btn.getAttribute('data-title') || btn.closest('.card')?.querySelector('h3')?.textContent?.trim() || 'Support item';
            const price = parsePrice(btn.getAttribute('data-price') || btn.closest('.card')?.querySelector('.price')?.textContent || '0');
            const item = { title: title, price: Number(price), addedAt: new Date().toISOString() };
            const cart = loadCart();
            cart.push(item);
            saveCart(cart);
            renderCart();
            showToast('Added to cart: ' + title);
          });
        });
      }

      /* ---------- Custom donation ---------- */
      const customInput = document.getElementById('custom-amount');
      const customAdd = document.getElementById('custom-add');
      if (customInput && customAdd) {
        customInput.addEventListener('input', () => {
          const v = Number(customInput.value);
          if (Number.isFinite(v) && v >= 1) {
            customAdd.disabled = false;
            customAdd.removeAttribute('aria-disabled');
          } else {
            customAdd.disabled = true;
            customAdd.setAttribute('aria-disabled', 'true');
          }
        });
        customAdd.addEventListener('click', (e) => {
          e.preventDefault();
          const v = Number(customInput.value);
          if (!Number.isFinite(v) || v < 1) { showToast('Enter a valid amount (minimum $1)'); return; }
          const item = { title: 'Custom Donation', price: Number(v), custom: true, addedAt: new Date().toISOString() };
          const cart = loadCart();
          cart.push(item);
          saveCart(cart);
          renderCart();
          showToast('Custom donation added');
          customInput.value = '';
          customAdd.disabled = true;
        });
      }

      /* ---------- Mobile menu toggle (kept minimal) ---------- */
      const mobileToggle = document.getElementById('mobile-toggle');
      const mobileMenu = document.getElementById('mobile-menu');
      if (mobileToggle && mobileMenu) {
        mobileToggle.addEventListener('click', (e) => {
          e.preventDefault();
          const open = mobileToggle.getAttribute('aria-expanded') === 'true';
          if (open) {
            mobileMenu.style.display = 'none';
            mobileToggle.setAttribute('aria-expanded', 'false');
          } else {
            mobileMenu.style.display = 'block';
            mobileToggle.setAttribute('aria-expanded', 'true');
          }
        });
        // Close on outside click
        document.addEventListener('click', (ev) => {
          if (!mobileMenu.contains(ev.target) && !mobileToggle.contains(ev.target)) {
            mobileMenu.style.display = 'none';
            mobileToggle.setAttribute('aria-expanded', 'false');
          }
        });
      }

      /* ---------- Init ---------- */
      function init() {
        renderCart();
        bindAddButtons();
      }

      if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', init);
      } else {
        init();
      }
    })();
  </script>
</body>
</html>
